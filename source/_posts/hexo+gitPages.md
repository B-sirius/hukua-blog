---
title: linux下使用hexo+git pages搭建博客的几个小坑
tags: [hexo,git]
date: 2016-11-27 10:25:06
categories: 博客
description: 其实好早就想搭个博客，不过由于不熟悉服务器端迟迟没有动手。而最近发现有不少基于git pages托管服务的博客，于是自己也搞了一个试试，发现意外的不错（不过要是以后换电脑可能还要重新配置？），作为练手的博文，总结一下搭建过程中几个小坑好了...
---

其实好早就想搭个博客，不过由于不熟悉服务器端迟迟没有动手。而最近发现有不少基于git pages托管服务的博客，于是自己也搞了一个试试，发现意外的不错（不过要是以后换电脑可能还要重新配置？），作为练手的博文，总结一下搭建过程中几个小坑好了。

**以下内容中，博客根目录为`\`，博客域名为`xxx.github.io`，`xxx`请根据自己的起的名称进行替换 ，`博客配置文件`为`_config.yml`，`主题配置文件`为`\themes\aaa\_config.yml`（`aaa`请根据你所使用的主题名称替换），修改时请在本地修改，不要在git仓库中直接修改。在尝试一下操作前先保证自己的部署步骤正确，（`hexo clean`，`hexo g`，`hexo d`等命令），部署不成功很可能是你搞炸了你的配置文件，配置文件的语法很严格，操作请小心，另外刷新页面时请ctrl+f5强制刷新，防止缓存坑人。**

## 博客部署后各种访问失败/404，或只能加载html而没有样式表
在确认你本地博客目录正确的情况下，请打开博客对应的github仓库，确认仓库名为`xxx.github.io`，然后打开`settings`，在`GitHub Pages-Source`的选项卡中选择`master branch`并保存，保存成功后应该此选项卡应该会有绿色标识提醒你可从何处访问（此处我进行了域名解析，默认应该是`xxx.github.io`），此时再访问`xxx.github.io`应该已经正常。
![绿色标识](http://ohc14nmlw.bkt.clouddn.com/hexo+gitPages/successful.png "绿色标识")
**ps: 如果你的博客是存放在子目录中，比如你让仓库名为`blog`而非`xxx.github.io`，此时进行上述设置后，你的访问地址应该为`http://你的github用户名.github.io/blog`，是一个名为blog的子目录，这时你还需要打开`博客配置文件`,修改`root`为`/blog/`，之后应该就可以正常访问了。但是并不建议你这样做，且不说域名会变得很长，若是将来购买了自己的域名，在选择域名解析服务时，可能不支持解析url，也就是只能解析到`http://你的github用户名.github.io`这一层，在访问博客时还要在解析的域名后加上/blog/，这尼玛忒蛋疼了。**

## 博客部署已经成功，但是用自己的域名进行域名解析后再次访问失败/404了

假设你域名解析本身正确，请在你的本地`\source`目录下新建`.gitignore`文件，内容写入`CNAME`（这个文件建立后默认是隐藏的，建议用vim创建），然后再在同目录下新建`CNAME`文件，内容写入你的域名地址，比如我就是`b-sirius.me`，之后重新部署，应该已经正常。**注意直接在git仓库中`settings`中设置`Custom domain`，或是在线上git仓库中创建以上文件，都是不行的**，因为hexo在重新部署本地文件时会直接覆盖你的仓库，然后你的设置就都gg了。



--------------------------------------------------------

比较大的问题基本就是这样，部署成功后可能会有各种小小的问题，请仔细阅读hexo的官方文档：[hexo中文文档](https://hexo.io/zh-cn/)，和你所使用的主题文档，相信都能找到答案。

本人还是相当的新手，若有什么错误或者建议欢迎留言或者邮件指出（哇说的好像会有人看一样(⁰⊖⁰)